kibana:
  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: nginx
      certmanager.k8s.io/cluster-issuer: letsencrypt-dev
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
      # auth
      nginx.ingress.kubernetes.io/auth-type: basic
      nginx.ingress.kubernetes.io/auth-secret: basic-auth
      # message to display with an appropriate context why the authentication is required
      nginx.ingress.kubernetes.io/auth-realm: 'Authentication Required'
    path: /
      hosts:
        - elk.nowak-dev.xyz
      tls:
        - secretName: dev-secret-infra-local-encrypt
          hosts:
            - elk.nowak-dev.xyz

filebeat:
  filebeatConfig:
    filebeat.yml: |
      filebeat.inputs:
      - type: docker
        containers.ids:
        - '*'
        processors:
        - add_kubernetes_metadata:
            in_cluster: true
        - decode_json_fields:
            fields: ["log", "message"]
            target: ""
        # overwrite existing target elasticsearch fields while decoding json fields
            overwrite_keys: true
        - add_docker_metadata: ~

      output.elasticsearch:
        hosts: '${ELASTICSEARCH_HOSTS:elasticsearch-master:9200}'

      # Write Filebeat own logs only to file to avoid catching them with itself in docker log files
      logging.to_files: true
      logging.to_syslog: false