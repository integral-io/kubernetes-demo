kibana:
  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: nginx
      # auth
      nginx.ingress.kubernetes.io/auth-type: basic
      nginx.ingress.kubernetes.io/auth-secret: basic-auth
      # message to display with an appropriate context why the authentication is required
      nginx.ingress.kubernetes.io/auth-realm: 'Authentication Required'
    path: /
    hosts:
      - elk.nowak-dev.loc

elasticsearch:
  antiAffinity: "soft"
  esJavaOpts: "-Xmx128m -Xms128m"
  replicas: 1
  volumeClaimTemplate:
    accessModes: [ "ReadWriteOnce" ]
    storageClassName: "standard"
    resources:
      requests:
        storage: 100M
  #    minimumMasterNodes: 1
  resources:
    requests:
      cpu: "100m"
      memory: "512M"
    limits:
      cpu: "1000m"
      memory: "512M"

filebeat:
  filebeatConfig:
    filebeat.yml: |
      filebeat.inputs:
      - type: docker
        containers.ids:
        - '*'
        processors:
        - add_kubernetes_metadata:
            in_cluster: true
        - decode_json_fields:
            fields: ["log", "message"]
            target: ""
        # overwrite existing target elasticsearch fields while decoding json fields
            overwrite_keys: true
        - add_docker_metadata: ~

      output.elasticsearch:
        hosts: '${ELASTICSEARCH_HOSTS:elasticsearch-master:9200}'

      # Write Filebeat own logs only to file to avoid catching them with itself in docker log files
      logging.to_files: true
      logging.to_syslog: false